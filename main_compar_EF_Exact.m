%Opération menant à la Comparaison de la solution par EF et Exacte
%--------------------------------------------------------------------------
clear all, close all, clc
%--------------------------------------------------------------------------
%Exprimons la valeur explicite des variables
%--------------------------------------------------------------------------
w0=1; 
k=8; 
L=input('entrez la longeur du câble : ');
T=input('entrez la tension du câble : ');
%Définir le nombre d'élément du cable
n=input('entrez le nombre d element : ');
N=n+1;
dN=L/n;
X=0:dN:L;
Y=sym('Y',[1 N]);
syms x
w=input('entrez le type de chargement : ');  %w0.*(1-k*x).*exp(-k*x);

%--------------------------------------------------------------------------
%Energie totale
%--------------------------------------------------------------------------
E = Energ(x,X,Y,N,w,T);
%--------------------------------------------------------------------------
%Conditions Limites 
%--------------------------------------------------------------------------
E = CLim(E,Y,N);
%--------------------------------------------------------------------------
%Equation résultante en i 
%--------------------------------------------------------------------------
VectEqn = vpa(Eval_Eqn(E,Y,N));
%--------------------------------------------------------------------------
%Extraction Matrice
%--------------------------------------------------------------------------
%--------------------------------------------------------------------------
[A,b] = equationsToMatrix(VectEqn,Y);
%--------------------------------------------------------------------------
%Attribuons chaque variable à une valeur
%--------------------------------------------------------------------------
Y = linsolve(A,b);
%--------------------------------------------------------------------------
%--------------------------------------------------------------------------
% Appel de la solution Exacte
%--------------------------------------------------------------------------
%--------------------------------------------------------------------------
yEx = SolExact(x, w0, k, L, T);
%--------------------------------------------------------------------------

hold on
p1 = plot(X,Y);
p3 = fplot(yEx, [0 2],'-.*m');
hold off
legend([p1 p3],{'EF','Exacte'})
title('Comparaison de la solution par EF et Exacte')
xlabel('X/L')
ylabel('(yT)/(wL^2)')


